# MVPose (Single frame)

- [Introduction](#introduction)
- [Prepare models and datasets](#prepare-models-and-datasets)
- [Results and Models](#results-and-models)

## Introduction

We provide the config files for MVPose (Single frame): [Fast and robust multi-person 3d pose estimation from multiple views](https://zju3dv.github.io/mvpose/).

[Official Implementation](https://github.com/zju3dv/mvpose)

```BibTeX
@inproceedings{dong2019fast,
  title={Fast and robust multi-person 3d pose estimation from multiple views},
  author={Dong, Junting and Jiang, Wen and Huang, Qixing and Bao, Hujun and Zhou, Xiaowei},
  booktitle={Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition},
  pages={7792--7801},
  year={2019}
}
```
## Prepare models and datasets

- **Prepare models**:

```
sh scripts/download_weight.sh
```
You can find `resnet50_reid_camstyle.pth.tar` in `weight` file.

- **Prepare the datasets**:

Convert original dataset to our unified meta-data, with data converters controlled by configs,
you can find more details in [dataset_preparation.md](../../docs/en/dataset_preparation.md).

The final file structure would be like:

```text
xrmocap
├── xrmocap
├── docs
├── tools
├── configs
└── weight
    └── resnet50_reid_camstyle.pth.tar
└── xrmocap_data
    ├── Shelf
        ├── Camera0
        ├── ...
        ├── Camera4
        ├── xrmocap_meta_testset_fasterrcnn
        └── xrmocap_meta_testset
    ├── CampusSeq1
    └── panoptic
        ├── xrmocap_meta_ian5
            ├── hd_00_03
            ├── ...
            ├── hd_00_23
            ├── camera_parameters
            ├── keypoints3d_GT.npz
            └── perception_2d.npz
        ├── xrmocap_meta_pizza1
        ├── xrmocap_meta_band4
        └── xrmocap_meta_haggling1
```

## Results and Models

We evaluate MVPose (Single frame) on 3 popular benchmarks, report the Percentage of Correct Parts (PCP) on Shelf/Campus/CMU-Panoptic datasets.

You can find the recommended configs in `configs/mvpose/*/eval_keypoints3d.py`, where `__bbox_thr__` is the threshold of bbox2d, you can set a high threshold to ignore incorrect 2D perception data, `n_cam_min` is the amount of keypoints2d required for triangulation, which defaults to 2.


### Campus

The 2D perception data we use is generated by fasterrcnn, and you can download it from [here](/docs/en/dataset_preparation.md#download-converted-meta-data). What's more, we set `__bbox_thr__=0.9` and `n_cam_min=2`.

| Config | Actor 0 | Actor 1 | Actor 2 | Average | Download |
|:------:|:-------:|:--------:|:--------:|:--------:|:--------:|
| [eval_keypoints3d.py](./campus_config/eval_keypoints3d.py) | 94.17 | 88.67 | 98.24 | 93.69 | [log]() |


### Shelf

The 2D perception data we use is generated by fasterrcnn, and you can download it from [here](/docs/en/dataset_preparation.md#download-converted-meta-data). What's more, we set `__bbox_thr__=0.9` and `n_cam_min=3`.

| Config | Actor 0 | Actor 1 | Actor 2 | Average | Download |
|:------:|:-------:|:--------:|:--------:|:--------:|:--------:|
| [eval_keypoints3d.py](./shelf_config/eval_keypoints3d.py) | 97.53 | 94.05 | 97.89 | 96.49 | [log]() |


### CMU Panoptic

The 2D perception data we use is generated by mmpose, and you can download it from [here](/docs/en/dataset_preparation.md#download-converted-meta-data). The selection principle of the camera is to cover as much information as possible about the human body, so we selected cameras 3, 6, 12, 13 and 23. You can find more details in [config files](panoptic_config/eval_keypoints3d.py).

The CMU Panoptic dataset contains four sequences that share the same config file. For different sequences, you need to change the `__meta_path__`. In addition, there is a child in `160906_ian5` sequence, and the number of cameras that capture him decreases, so we set `__bbox_thr__=0.85` and `n_cam_min=2`. For other sequences, we set `__bbox_thr__=0.9` and `n_cam_min=3`.

- **160906_band4**

| Config | Actor 0 | Actor 1 | Actor 2 | Average | Download |
|:-------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| [eval_keypoints3d.py](./panoptic_config/eval_keypoints3d.py) | 98.49 | 79.39 | 92.53 | 90.14 | [log]() |

- **160906_ian5**

| Config | Actor 0 | Actor 1 | Average | Download |
|:-------:|:--------:|:--------:|:--------:|:--------:|
| [eval_keypoints3d.py](./panoptic_config/eval_keypoints3d.py) | 96.30 | 71.08 | 83.69 | [log]() |

- **160906_pizza1**

| Config | Actor 0 | Actor 1 | Actor 2 | Actor 3 | Actor 4 | Actor 5 | Actor 6 | Average | Download |
|:-------:|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| [eval_keypoints3d.py](./panoptic_config/eval_keypoints3d.py) | 98.88 | 85.69 | 67.78 | 93.93 | 90.69 | 62.81 | 91.56 | 84.48 | [log]() |

- **160422_haggling1**

| Config | Actor 0 | Actor 1 | Actor 2 | Actor 3 | Actor 4 | Actor 5 | Actor 6 | Actor 7 | Actor 8 | Actor 9 | Actor 10 | Actor 11 | Actor 12 | Actor 13 | Actor 14 | Actor 15 | Actor 16 | Actor 17 | Average | Download |
|:-------:|:--------:|:--------:|:--------:|:--------:|:--------:|:-------:|:--------:|:--------:|:--------:|:--------:|:--------:|:-------:|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| [eval_keypoints3d.py](./panoptic_config/eval_keypoints3d.py) | 97.41 | 97.51 | 95.02 | 97.78 | 95.67 | 88.57 | 86.36 | 43.62 | 96.79 | 90.65 | 97.55  | 91.74  | 81.64  | 89.09  | 97.13  | 85.47  | 97.97  | 88.64  | 89.92 | [log]() |
